Общие сведения о программных лицензиях

Программная лицензия представляет собой специальный файл, который в зашифрованном виде содержит параметры лицензии и компьютера, для которого эта лицензия была активирована. Дублирование данного файла не допускается, в этом случае лицензия аннулируется и заносится в "черный список" на сервере активации 1С.

Активация лицензии выполняется при помощи пин-кода, вместе с лицензией поставляются активные и резервные пин-коды, которые требуются для повторной активации лицензии при изменении ключевых параметров компьютера.

Здесь мы подошли к крайне важному моменту: привязке программных лицензий к конкретному ПК. Для этого используется понятие ключевых параметров, в которые входят:

сетевое имя компьютера;
модель материнской платы;
объем оперативной памяти;
тип и версия BIOS;
список процессоров и их параметры;
список сетевых адаптеров и их MAC-адреса;
список жестких дисков и их параметры.
На платформе Windows в число ключевых параметров также входят:

наименование операционной системы;
версия операционной системы (только первые две цифры номера версии);
серийный номер операционной системы;
дата установки операционной системы;
При этом из списка ключевых параметров исключаются:

сетевые адаптеры Bluetooth;
сетевые адаптеры, подключенные по IEEE 1394 или USB;
программные адаптеры WAN и RAS;
адаптеры, не имеющие MAC-адреса и данных VEN_ и DEV_ из PNP-идентификатора;
внешние накопители, подключаемые по IEEE 1394 и USB.
В дальнейшем список ключевых параметров, который хранится в зашифрованном виде в файле лицензии сравнивается с текущими параметрами компьютера, при этом анализируется только удаление, а не добавление устройств, это же касается и объема оперативной памяти.

Проще говоря, вы можете добавить в систему еще один сетевой адаптер или жесткий диск, но не заменить текущие, а также не можете снизить объем оперативной памяти до значение меньшего, чем было на момент активации лицензии.

Из этого следует простое правило: при активации программной лицензии временно отключите все жесткие диски, кроме системного, а также все дополнительные сетевые адаптеры (если установлены).

Отдельно следует коснуться активации в виртуальных средах, при этом в качестве ключевых параметров лицензии берутся аналогичные значение виртуальной машины. Если вы используете динамическое выделение памяти, то на момент получения лицензии должны отключить эту возможность и загрузить систему с минимально возможным объемом выделенной памяти.

Наибольшие сложности возникают при использовании виртуальных машин в составе кластера, в этом случае при перемещении машин между нодами могут измениться сразу несколько ключевых параметров, в частности параметры процессора и сетевой карты. Если последний вопрос легкое решается присвоением статического MAC-адреса, то изменение типа процессора при текущей модели лицензирования является серьезной проблемой.

Из нашего опыта можем сказать следующее: успешная миграция виртуальной машины с сохранением активации лицензии 1С возможна только при использовании на всех доступных для миграции нодах однотипного железа, т.е. одинаковых моделей материнских плат (вплоть до версии BIOS) и одинаковых процессоров (с одинаковым степпингом).